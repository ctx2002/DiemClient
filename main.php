<?php

require_once __DIR__ . "/vendor/autoload.php";


use Softwarewisdom\Diem\TestNet\DiemTestNet;
use Softwarewisdom\Diem\BcsDeserializer;
use Softwarewisdom\Diem\ByteBuffer;
use Softwarewisdom\LEB128\Signed\Encode;
/** use hash sha256 to generate a new key */
/*$key = '68b1282b91de2c054c36629cb8dd447f12f096d3e3c587978dc2248444633483';
$testnet = new DiemTestNet('http://faucet.testnet.diem.com/', $key);
$acc = $testnet->account()->create();
$coin = $testnet->mint($acc);
*/
/*$r = str_split("01000000000000000000000000000000dd05a600000000000001e001a11ceb0b010000000701000202020403061004160205181d0735600895011000000001010000020001000003020301010004010300010501060c0108000506080005030a020a020005060c05030a020a020109000b4469656d4163636f756e741257697468647261774361706162696c6974791b657874726163745f77697468647261775f6361706162696c697479087061795f66726f6d1b726573746f72655f77697468647261775f6361706162696c69747900000000000000000000000000000001010104010c0b0011000c050e050a010a020b030b0438000b051102020107000000000000000000000000000000010358555303585553000403a74fd7c46952c497e75afb0a7932586d0140420f00000000000400040040420f00000000000000000000000000035855532a610f6000000000020020056244e7bf776e471d818dc18fdf7b8833c5439ac9a96e126f8f32c7bc7c14b64026a2c45c8e4066c661dc4f36baa6ad61499999b548b9f63ad15853660c408cedec3078b7773a829ec48de8b04291cd11530734b2f91d5e42f35a4c6378cb7c09", 2);

$re = array_map(
    static function (string $item) {
            return (int)bin2hex($item);
    },
    $r
);*/

$hex = new ByteBuffer('01000000000000000000000000000000dd05a600000000000001e001a11ceb0b010000000701000202020403061004160205181d0735600895011000000001010000020001000003020301010004010300010501060c0108000506080005030a020a020005060c05030a020a020109000b4469656d4163636f756e741257697468647261774361706162696c6974791b657874726163745f77697468647261775f6361706162696c697479087061795f66726f6d1b726573746f72655f77697468647261775f6361706162696c69747900000000000000000000000000000001010104010c0b0011000c050e050a010a020b030b0438000b051102020107000000000000000000000000000000010358555303585553000403a74fd7c46952c497e75afb0a7932586d0140420f00000000000400040040420f00000000000000000000000000035855532a610f6000000000020020056244e7bf776e471d818dc18fdf7b8833c5439ac9a96e126f8f32c7bc7c14b64026a2c45c8e4066c661dc4f36baa6ad61499999b548b9f63ad15853660c408cedec3078b7773a829ec48de8b04291cd11530734b2f91d5e42f35a4c6378cb7c09');
$de = new BcsDeserializer($hex->toHex());
$len = $de->deserializeLen();
var_dump($len);

/*$en = new Encode(128);
$en->encode();
var_dump($en->value());*/
